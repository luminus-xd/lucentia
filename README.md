# Lucentia

Lucentia は、Tauri と Next.js を利用して構築されたデスクトップアプリケーションです。
このアプリケーションは yt-dlp を利用して、YouTube などの動画をダウンロードします。
出力形式は MP4 で、ダウンロード進捗はリアルタイムに表示されます。

## 主な機能

- **動画ダウンロード**
  YouTube や bilibili の URL を指定して動画をダウンロード可能です。

- **自動出力ファイル名**
  出力ファイル名を省略した場合、動画のタイトルを取得してファイル名として使用します。

- **yt-dlp の自動ダウンロード**
  アプリケーション起動時に yt-dlp が自動的にダウンロードされるため、事前のインストールが不要です。

- **bilibili 対応**
  bilibili の URL が入力された場合、自動的に "--cookies-from-browser firefox" オプションを付与してダウンロードを行います。

- **進捗表示**
  ダウンロード進捗をリアルタイムに表示します。

- **ダウンロード中の UI 制御**
  ダウンロード中は入力フォームおよびダウンロードボタンが無効化され、誤操作を防止します。

## 技術スタック

- **Tauri (Rust)**  
  バックエンド処理、システムのコマンド実行、イベント送信などに利用。

- **Next.js (React / TypeScript)**  
  フロントエンドのユーザーインターフェースを構築。

- **yt-dlp**  
  動画のダウンロードとフォーマット変換に使用。

## インストール

### 前提条件

- [Node.js](https://nodejs.org/)
- [Rust](https://www.rust-lang.org/tools/install)

### プロジェクトのセットアップ

1. リポジトリをクローン

```bash
git clone https://github.com/yourname/lucentia.git
cd lucentia
```

2. 依存関係をインストール

```bash
npm install
```

## 開発環境での実行

開発環境でアプリを起動するには：

```bash
npm run dev:tauri
```

## ビルドとパッケージング

リリース版の実行可能ファイルを作成するには：

```bash
npm run build
npm run build:tauri
```

これにより、各プラットフォーム向けのパッケージが生成されます。

## 使用方法

1. アプリ起動後、動画の URL を入力します。  
   例: `https://www.youtube.com/watch?v=...`

2. 出力ファイル名を入力するか、空欄にすると動画タイトルが自動的に使用されます。  
   ダウンロード先はシステムのダウンロードフォルダに自動設定されます。

3. 「ダウンロード開始」ボタンをクリックすると、ダウンロードが開始され、進捗がリアルタイムに表示されます。

## コントリビューション

ご意見、バグ報告、機能改善の提案などは大歓迎です。
プルリクエストや Issue を通じてご連絡ください。

## ライセンス

このプロジェクトは MIT ライセンスの下で公開されています。

## 継続的インテグレーション/継続的デリバリー

このプロジェクトではGitHub Actionsを使用して以下の自動化を行っています：

1. **テストビルド**
   - PRがmainブランチに対して作成されると、Windows、macOS、Linuxの各プラットフォーム向けのテストビルドが自動的に実行されます。
   - これにより、コードの変更がビルドを壊さないことを保証します。

2. **リリースビルド**
   - mainブランチへのプッシュ、またはタグ（`v*`形式）のプッシュ時に自動的にビルドが実行されます。
   - タグがプッシュされた場合は、GitHub Releaseが自動的に作成され、ビルド済みのバイナリがアップロードされます。

3. **手動トリガー**
   - GitHub Actionsのworkflow_dispatchイベントを使用して、手動でビルドプロセスをトリガーすることも可能です。

詳細については、`.github/workflows`ディレクトリ内のワークフローファイルを参照してください。